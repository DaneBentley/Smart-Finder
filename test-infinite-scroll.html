<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dynamic Content - Findr Extension</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: #f4f4f4;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .item {
            padding: 15px;
            margin: 10px 0;
            background: #e8f4f8;
            border: 1px solid #b8dce8;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .item:hover {
            background: #d4e6f1;
        }
        
        .load-more {
            background: #007cba;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px 0;
            display: block;
            width: 200px;
            margin: 20px auto;
        }
        
        .load-more:hover {
            background: #005a87;
        }
        
        .load-more:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .auto-load {
            margin: 20px 0;
            text-align: center;
        }
        
        .auto-load label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
        }
        
        .instructions {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #0c5460;
        }
        
        .instructions ol {
            margin-bottom: 0;
        }
        
        .search-terms {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
        }
        
        .search-activity {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #28a745;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        
        .search-activity.visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Test Dynamic Content for Findr Extension</h1>
        
        <div class="instructions">
            <h3>How to test dynamic content adaptation:</h3>
            <ol>
                <li>Open your Findr extension (Ctrl+F or Cmd+F)</li>
                <li>Search for terms like "apple", "banana", "item", or "dynamic"</li>
                <li>Note the number of results found</li>
                <li>Click "Load More Content" or enable auto-loading</li>
                <li>Watch as new results appear automatically without needing to retype!</li>
                <li>üîç Look for the green "re-searching" indicator in the top-right when Findr updates</li>
            </ol>
            
            <div class="search-terms">
                <strong>Good search terms to try:</strong><br>
                ‚Ä¢ "apple" - appears in fruit items<br>
                ‚Ä¢ "banana" - appears in fruit items<br>
                ‚Ä¢ "dynamic" - appears in dynamic content items<br>
                ‚Ä¢ "item" - appears in most items<br>
                ‚Ä¢ "content" - appears in many places<br><br>
                <strong>üöÄ Optimized Behavior:</strong><br>
                ‚Ä¢ Preserves existing highlights when adding new results<br>
                ‚Ä¢ Only searches new content (incremental search)<br>
                ‚Ä¢ <strong>NEW:</strong> Works in AI mode when showing regular search results<br>
                ‚Ä¢ Disabled in AI mode when showing AI search results (contextual)<br>
                ‚Ä¢ Requires 100+ characters of new content to trigger<br>
                ‚Ä¢ Won't interfere with active typing or navigation<br><br>
                <strong>ü§ñ AI Mode Testing:</strong><br>
                ‚Ä¢ Toggle AI mode in extension popup<br>
                ‚Ä¢ Search for "apple" (should show regular results + incremental search)<br>
                ‚Ä¢ Press Enter to trigger AI search (incremental search disabled)<br>
                ‚Ä¢ Toggle back to regular search to re-enable incremental search
            </div>
        </div>
        
        <div class="auto-load">
            <label>
                <input type="checkbox" id="autoLoad"> 
                Auto-load content every 3 seconds
            </label>
        </div>
        
        <div id="content">
            <div class="item">üçé Item 1: Fresh apple from the orchard, crisp and sweet</div>
            <div class="item">üçå Item 2: Ripe banana perfect for smoothies</div>
            <div class="item">üçä Item 3: Juicy orange packed with vitamin C</div>
            <div class="item">ü•ù Item 4: Kiwi fruit with fuzzy skin and green flesh</div>
            <div class="item">üçá Item 5: Purple grapes in a beautiful cluster</div>
        </div>
        
        <button class="load-more" id="loadMore">Load More Content</button>
        
        <div class="status" id="status">
            Ready to load more content. Try searching first, then add more content!
        </div>
    </div>
    
    <div class="search-activity" id="searchActivity">
        üîç Findr re-searching...
    </div>

    <script>
        let itemCount = 5;
        let autoLoadInterval = null;
        
        const contentDiv = document.getElementById('content');
        const loadMoreBtn = document.getElementById('loadMore');
        const statusDiv = document.getElementById('status');
        const autoLoadCheckbox = document.getElementById('autoLoad');
        const searchActivityDiv = document.getElementById('searchActivity');
        
        const fruitItems = [
            'üçé Fresh apple varieties: Granny Smith, Red Delicious',
            'üçå Banana bread recipe ingredients needed',
            'üçä Orange juice concentrate available',
            'ü•ù Kiwi smoothie bowl with dynamic toppings',
            'üçá Grape vineyard produces dynamic harvests',
            'üçì Strawberry fields with dynamic growth',
            'ü•≠ Mango chunks for dynamic fruit salads',
            'üçë Cherry pie with dynamic sweetness levels',
            'üçê Pear varieties show dynamic ripening patterns',
            'ü•• Coconut water provides dynamic hydration'
        ];
        
        const contentItems = [
            'Dynamic content management system',
            'Interactive user interface elements',
            'Responsive design for all devices',
            'Real-time data synchronization',
            'Advanced search capabilities',
            'Modern web development practices',
            'Scalable architecture patterns',
            'Performance optimization techniques',
            'User experience design principles',
            'Cross-browser compatibility testing'
        ];
        
        // Monitor console for Findr activity
        let originalConsoleLog = console.log;
        console.log = function(...args) {
            // Check if this is a Findr incremental search message
            if (args.length > 0 && typeof args[0] === 'string' && 
                (args[0].includes('üîÑ Triggering incremental search') || args[0].includes('‚ú® Found'))) {
                showSearchActivity();
            }
            originalConsoleLog.apply(console, args);
        };
        
        function showSearchActivity() {
            searchActivityDiv.classList.add('visible');
            setTimeout(() => {
                searchActivityDiv.classList.remove('visible');
            }, 2000);
        }
        
        function loadMoreContent() {
            const batchSize = 3;
            let newItems = [];
            
            for (let i = 0; i < batchSize; i++) {
                itemCount++;
                let content;
                
                if (Math.random() > 0.5) {
                    // Add fruit item
                    const fruit = fruitItems[Math.floor(Math.random() * fruitItems.length)];
                    content = `Item ${itemCount}: ${fruit}`;
                } else {
                    // Add tech content item
                    const tech = contentItems[Math.floor(Math.random() * contentItems.length)];
                    content = `Item ${itemCount}: ${tech} (dynamic implementation)`;
                }
                
                const newItem = document.createElement('div');
                newItem.className = 'item';
                newItem.textContent = content;
                newItems.push(newItem);
            }
            
            // Add items with a slight animation delay
            newItems.forEach((item, index) => {
                setTimeout(() => {
                    contentDiv.appendChild(item);
                    item.style.opacity = '0';
                    item.style.transform = 'translateY(20px)';
                    
                    // Animate in
                    setTimeout(() => {
                        item.style.transition = 'opacity 0.3s, transform 0.3s';
                        item.style.opacity = '1';
                        item.style.transform = 'translateY(0)';
                    }, 10);
                }, index * 100);
            });
            
            statusDiv.textContent = `Loaded ${batchSize} new items! Total: ${itemCount} items. Try searching again to see new results appear automatically!`;
            
            // Disable button temporarily to show the effect
            loadMoreBtn.disabled = true;
            setTimeout(() => {
                loadMoreBtn.disabled = false;
            }, 1000);
        }
        
        function toggleAutoLoad() {
            if (autoLoadCheckbox.checked) {
                statusDiv.textContent = 'Auto-loading enabled! New content will be added every 3 seconds.';
                autoLoadInterval = setInterval(() => {
                    loadMoreContent();
                }, 3000);
            } else {
                statusDiv.textContent = 'Auto-loading disabled.';
                if (autoLoadInterval) {
                    clearInterval(autoLoadInterval);
                    autoLoadInterval = null;
                }
            }
        }
        
        loadMoreBtn.addEventListener('click', loadMoreContent);
        autoLoadCheckbox.addEventListener('change', toggleAutoLoad);
        
        // Add some initial helpful text
        setTimeout(() => {
            statusDiv.textContent = 'Open Findr (Ctrl+F) and search for "apple", "banana", "dynamic", or "item" to test!';
        }, 1000);
    </script>
</body>
</html> 